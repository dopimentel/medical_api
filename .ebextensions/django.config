# Settings and commands for Amazon Linux 2023 Python Platform

packages:
  yum:
    libpq-devel: []
    gcc: []

option_settings:
  aws:elasticbeanstalk:application:environment:
    DJANGO_SETTINGS_MODULE: core.settings.production
  aws:elasticbeanstalk:container:python:
    WSGIPath: core.wsgi:application

container_commands:
  01_migrate:
    # Redireciona a saÃ­da de erro para /tmp/migrate.log, onde temos permissÃ£o de escrita
    command: "source /var/app/venv/*/bin/activate && django-admin migrate --noinput > /tmp/migrate.log 2>&1"
    leader_only: true
  02_collectstatic:
    command: "source /var/app/venv/*/bin/activate && django-admin collectstatic --noinput > /tmp/collectstatic.log 2>&1"
    leader_only: true